<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="pers.wjx.ojsb.repository.JudgeRepository">
    <insert id="addJudge">
        insert into judge(record_id, test_id)
        values (#{recordId}, #{testId})
    </insert>
    <update id="updateJudge">
        update judge
        set judge_token=#{judgeToken},
            judge_result=#{judgeResult},
            execute_time=#{executeTime},
            execute_memory=#{executeMemory}
        where record_id = #{recordId}
          and test_id = #{testId}
          and (judge_result = 'PD' or judge_result = 'JD')
    </update>
    <delete id="deleteJudgesByRecordId">
        delete
        from judge
        where record_id = #{recordId}
    </delete>
    <select id="getJudgesByRecordId" resultType="pers.wjx.ojsb.pojo.Judge">
        select *
        from judge
        where record_id = #{recordId}
    </select>
</mapper>