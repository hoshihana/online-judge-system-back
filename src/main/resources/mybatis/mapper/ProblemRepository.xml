<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="pers.wjx.ojsb.repository.ProblemRepository">
    <insert id="addProblem" useGeneratedKeys="true" keyProperty="id">
        insert into problem(id, author_id, `name`, description, input_format, output_format, explanation, samples,
                            time_limit, memory_limit)
        values (#{id}, #{authorId}, #{name}, #{description}, #{inputFormat}, #{outputFormat}, #{explanation},
                #{samples}, #{timeLimit}, #{memoryLimit})
    </insert>
    <select id="getProblemById" resultType="pers.wjx.ojsb.pojo.Problem">
        select *
        from problem
        where id = #{id}
    </select>
    <select id="getProblemsByAuthorId" resultType="pers.wjx.ojsb.pojo.Problem">
        select *
        from problem
        where author_id = #{authorId}
        limit #{startIndex},#{pageSize}
    </select>
    <select id="getProblemsByName" resultType="pers.wjx.ojsb.pojo.Problem">
        select *
        from problem
        where `name` like concat('%', #{name}, '%')
        limit #{startIndex},#{pageSize}
    </select>
    <select id="countProblemsByName" resultType="java.lang.Integer">
        select count(*)
        from problem
        where `name` like concat('%', #{name}, '%')
    </select>

</mapper>